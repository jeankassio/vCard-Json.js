/*! 
 * vCard Json.js v.7.6
 * Code Modified by Jean Kássio - Code original by Mattt Thompson, 2008 - https://github.com/leachiM2k/vcard.js
 *
 * More info:
 * https://jeankassio.dev
 *
 * Copyright Jean Kássio
 * Released under the MIT license
 * https://github.com/jeankassio/vCard-Json.js/blob/main/LICENSE
 *
 * @preserve
 */ Array.prototype.forEach||(Array.prototype.forEach=function(t,e){e=e||this;for(var i=0,o=this.length;i<o;i++)t.call(e,this[i],i,this)}),"undefined"==typeof Prototype&&Array.prototype.map||(Array.prototype.map=function(t,e){e=e||this;for(var i=[],o=0,r=this.length;o<r;o++)i.push(t.call(e,this[o],o,this));return i}),"undefined"==typeof Prototype&&Array.prototype.filter||(Array.prototype.filter=function(t,e){e=e||this;for(var i=[],o=0,r=this.length;o<r;o++)t.call(e,this[o],o,this)&&i.push(this[o]);return i}),["forEach","map","filter","slice","concat"].forEach(function(t){Array[t]||(Array[t]=function(e){return this.prototype[t].apply(e,Array.prototype.slice.call(arguments,1))})}),Date.ISO8601PartMap={Year:1,Month:3,Date:5,Hours:7,Minutes:8,Seconds:9},Date.matchISO8601=function(t){return t.match(/^(\d{4})(-?(\d{2}))?(-?(\d{2}))?(T(\d{2}):?(\d{2})(:?(\d{2}))?)?(Z?(([+\-])(\d{2}):?(\d{2})))?$/)},Date.parseISO8601=function(t){var e=this.matchISO8601(t);if(e){var i=new Date,o=0;for(var r in this.ISO8601PartMap)(part=e[this.ISO8601PartMap[r]])?i["set"+r]("Month"==r?parseInt(part)-1:parseInt(part)):i["set"+r]("Date"==r?1:0);return e[11]&&(o=60*parseInt(e[14])+parseInt(e[15]),o*="-"==parseInt[13]?1:-1),o-=i.getTimezoneOffset(),i.setTime(i.getTime()+6e4*o),i}},vCard={initialize:function(t){var e={};return this.parse(t,e),e.prototype=vCard.Base,vCard.extend(e,vCard.SingletonMethods)},parse:function(t,e){var i={simple:/^(version|fn|title|org)\:(.+)$/i,complex:/^([^\:\;]+);([^\:]+)\:(.+)$/,key:/item\d{1,2}\./,properties:/((type=)?(.+);?)+/},o=t.split("\n");for(n in o)line=o[n],i.simple.test(line)?(key=(results=line.match(i.simple))[1].toLowerCase(),value=results[2],e[key]=value):i.complex.test(line)&&(key=(results=line.match(i.complex))[1].replace(i.key,"").toLowerCase(),type=(type=(properties=Array.map(properties=Array.filter(properties=results[2].split(";"),function(t){return!t.match(/[a-z]+=[a-z]+/)}),function(t){return t.replace(/type=/g,"")})).pop()||"default").toLowerCase(),value=results[3],value=/;/.test(value)?[value.split(";")]:value,e[key]=e[key]||{},e[key][type]=e[key][type]||[],e[key][type]=e[key][type].concat(value))},SingletonMethods:{to_json:function(){let t={};for(type in this.photo&&(t.photo=this.photo.base64[0]),t.fn=this.fn,this.title&&(t.title=this.title),this.org&&(t.org=this.org),this.adr)for(n in this.adr[type])for(field in value=this.adr[type][n],adr_fields=["post-office-box","extended-address","street-address","locality","region","postal-code","country-name"])value[field]&&(t[adr_fields[field]]=value[field]);for(type in this.tel)for(n in console.log(this.tel),this.tel[type])value=this.tel[type][n],t[type]=value;for(type in this.email)for(n in this.email[type])value=this.email[type][n],t[type]=value;for(type in this.url)for(n in this.url[type])value=this.url[type][n],t[type]=value;return JSON.stringify(t)}},extend:function(t,e){for(var i in e)t[i]=e[i];return t},Base:{}};